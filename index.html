<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KPOs Attendance Portal</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #eef2f3;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .container {
      background: white;
      padding: 30px 35px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 420px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #00695c;
    }
    label {
      display: block;
      margin: 15px 0 6px;
      font-weight: 600;
      color: #004d40;
    }
    select {
      width: 100%;
      padding: 9px 12px;
      border: 1.5px solid #00695c;
      border-radius: 6px;
      font-size: 15px;
      outline: none;
      transition: border-color 0.2s;
      background: white;
    }
    select:focus {
      border-color: #004d40;
    }
    select[disabled] {
      background: #f5f5f5;
      color: #666;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 25px;
      background: #00695c;
      color: white;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #004d40;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Welcome To KPOs Attendance Portal</h2>
    <form id="attendanceForm">
      <label for="name">Name</label>
      <select id="name" required>
  <option value="" disabled selected>Select your name</option>
  <option>Abdul Waheed</option>
  <option>Ali Raza</option>
  <option>Aqil Shah</option>
  <option>Arif Hussain</option>
  <option>Ehteshan Ali</option>
  <option>Hammad Ahmed</option>
  <option>Ibrar Hussain</option>
  <option>Inzimam Khan</option>
  <option>Junaid</option>
  <option>Khurram Shehzad</option>
  <option>Muhammad Umair</option>
  <option>Mutair Ali</option>
  <option>Nazim Shah</option>
  <option>Rameez Raja</option>
  <option>Shoaib Ahmed</option>
  <option>Syed Saqlain</option>
  <option>Tufail Fareed</option>
  <option>Usama Fayyaz</option>
  <option>Usman</option>
  <option>Waleed Abdullah</option>
  <option>Waleed Ijaz</option>
  <option>Waqas Ahmed</option>
  <option>Yasir</option>
  <option>Saad Khalid</option> <!-- Updated Name -->
  <option>Yawar</option>
</select>


      <label for="action">Action</label>
      <select id="action" required>
        <option value="" disabled selected>Select action</option>
        <option>Time In</option>
        <option>Time Out</option>
      </select>

      <label for="distribution">Distribution</label>
      <select id="distribution" disabled>
        <option value="" selected>— auto‑select based on name —</option>
        <option>Shan Marketing 1</option>
        <option>Reliance Distribution</option>
        <option>Mansehra Traders</option>
        <option>Insaf Traders</option>
        <option>Shan Marketing 2</option>
        <option>Chaudhary Marketing 1</option>
        <option>Chaudhary Marketing 2</option>
        <option>Arnial Traders</option>
        <option>Geco Supplies</option>
        <option>Pak Traders</option>
        <option>Zak Enterprises</option>
        <option>FSNA Traders</option>
        <option>Radiant Distribution</option>
        <option>Mughal Traders</option>
        <option>Gulzar Marketing</option>
        <option>Al Farooq Agencies</option>
        <option>Capital Marketing</option>
        <option>Friends Distribution</option>
        <option>S&S Marketing</option>
        <option>Yousafzai Traders</option>
        <option>Umair Traders</option>
      </select>

      <button type="submit">Submit Attendance</button>
    </form>
  </div>

  <script>
    const distMap = {
  "Abdul Waheed": "Shan Marketing 1",
  "Ali Raza": "Reliance Distribution",
  "Aqil Shah": "Mansehra Traders",
  "Arif Hussain": "Insaf Traders",
  "Ehteshan Ali": "Shan Marketing 2",
  "Hammad Ahmed": "Chaudhary Marketing 1",
  "Ibrar Hussain": "Shan Marketing 2",
  "Inzimam Khan": "Geco Supplies",
  "Junaid": "Pak Traders",
  "Khurram Shehzad": "Zak Enterprises",
  "Muhammad Umair": "FSNA Traders",
  "Mutair Ali": "Radiant Distribution",
  "Nazim Shah": "Mughal Traders",
  "Rameez Raja": "Gulzar Marketing",
  "Shoaib Ahmed": "Geco Supplies",
  "Syed Saqlain": "Reliance Distribution",
  "Tufail Fareed": "Chaudhary Marketing 2",
  "Usama Fayyaz": "Shan Marketing 1",
  "Usman": "Arnial Traders",
  "Waleed Abdullah": "Capital Marketing",
  "Waleed Ijaz": "Friends Distribution",
  "Waqas Ahmed": "Al Farooq Agencies",
  "Yasir": "S&S Marketing",
  "Saad Khalid": "Yousafzai Traders", // Replaces Yousafzai's KPO
  "Yawar": "Umair Traders"
};


    const nameEl = document.getElementById("name");
    const distEl = document.getElementById("distribution");

    nameEl.addEventListener("change", () => {
      const dist = distMap[nameEl.value] || "";
      distEl.value = dist;
    });

    document.getElementById("attendanceForm").addEventListener("submit", function(e) {
      e.preventDefault();
      if (!navigator.geolocation) {
        alert("Your browser doesn’t support location.");
        return;
      }

      navigator.geolocation.getCurrentPosition(function(pos) {
        const loc = pos.coords.latitude + "," + pos.coords.longitude;

        const entry = {
          name: "entry.1363975204",
          action: "entry.711139293",
          distribution: "entry.839253138",
          location: "entry.821867819"
        };

        const data = new URLSearchParams();
        data.append(entry.name, nameEl.value);
        data.append(entry.action, document.getElementById("action").value);
        data.append(entry.distribution, distEl.value);
        data.append(entry.location, loc);

        fetch("https://docs.google.com/forms/d/e/1FAIpQLSdJF165d_c3IWZPjWIDLbpNPgy7b_3MYBP3PsSMI4180q_0Kg/formResponse", {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: data.toString()
        }).then(() => {
          alert("✅ Attendance submitted!");
          document.getElementById("attendanceForm").reset();
          distEl.value = "";
        }).catch(() => {
          alert("❌ Submission failed, try again.");
        });

      }, function() {
        alert("❌ Location permission denied or failed.");
      });
    });
  </script>

</body>
</html>
